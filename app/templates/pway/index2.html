{% extends "base.html" %}

{% block page_content %}
<div class="page-header">
    <h1>Status</h1>
</div>
{% if projects %}
<table class="table table-hover vmiddle_sgg">
    <tr>
        <th>Project Name</th>
        <th>Date</th>
        <th>Filename</th>
        <th>Genome size</th>
        <th>n_cutoff</th>
        <th>Ignore</th>
        <th>Required</th>
        <th>Status</th>
        <th>Zip</th>
    </tr>
    {% for proj in projects %}
        {% if proj.run_complete %}
            <tr class="success">
            <td><a href="{{ url_for('pway.results', proj=proj.get_local_filename()) }}">{{ proj.get_local_filename() }}</a></td>
        {% else %}
            <tr>
            <td>{{ proj.get_local_filename() }}</td>
        {% endif %}
            <td>{{ proj.upload_time }} </td>
            <td>{{ proj.filename }} </td>
            <td>{{ proj.genome_size }} </td>
            <td>{{ proj.n_cutoff }} </td>
            <td>{{ proj.ignore_genes }} </td>
            <td>{{ proj.required_genes }} </td>
        {% if proj.run_complete %}
            <td>Complete</td>
        {% elif proj.run_complete == False %}
            <td>Running</td>
        {% else %}
            <td>Failed</td>
        {% endif %}
        {% if proj.run_complete %}
            <td>
                <!--<a href="{{ url_for('pway.archive', proj=proj.file_id) }}">-->
            <form method="get" action="{{ url_for('pway.archive', proj=proj.file_id) }}">
                <input type="hidden" name="proj" value="{{ proj.file_id }}">
                <button class="btn btn-default" aria-label="Download Archive">
                    <span class="glyphicon glyphicon-download" aria-hidden="true"></span>
                </button>
            </form>
            </td>
        {% else %}
            <td>n/a</td>
        {% endif %}
        </tr>
    {% endfor %}
</table>

{% else %}
No projects to show. Please upload a file on the <a href="{{url_for('pway.upload')}}">Upload</a> page.
{% endif %}

{% endblock %}
